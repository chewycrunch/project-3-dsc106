import{t as nn,a as He}from"../chunks/SND8OnFK.js";import{i as qr}from"../chunks/wD52Wjwp.js";import{D as er,ar as Xr,p as Vr,t as gn,m as _t,s as st,g as I,k as Br,K as Yr,W as Ot,O as Mt,n as vt,as as Ur,j as Gr,aq as Kr}from"../chunks/Dp0JXMyc.js";import{l as Wr,e as Jt,s as mn}from"../chunks/CGdHkT2g.js";import{p as jt,b as yn,i as Zr}from"../chunks/DBlY6N9e.js";import{s as Qr}from"../chunks/C0igb99y.js";import{o as Jr,a as jr}from"../chunks/B-QmcadW.js";function nr(t,e,n){if(t.multiple)return ni(t,e);for(var r of t.options){var i=Ut(r);if(Xr(i,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function ti(t,e){er(()=>{var n=new MutationObserver(()=>{var r=t.__value;nr(t,r)});return n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function ei(t,e,n=e){var r=!0;Wr(t,"change",i=>{var a=i?"[selected]":":checked",o;if(t.multiple)o=[].map.call(t.querySelectorAll(a),Ut);else{var s=t.querySelector(a)??t.querySelector("option:not([disabled])");o=s&&Ut(s)}n(o)}),er(()=>{var i=e();if(nr(t,i,r),r&&i===void 0){var a=t.querySelector(":checked");a!==null&&(i=Ut(a),n(i))}t.__value=i,r=!1}),ti(t)}function ni(t,e){for(var n of t.options)n.selected=~e.indexOf(Ut(n))}function Ut(t){return"__value"in t?t.__value:t.value}function ie(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ri(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function rr(t){let e,n,r;t.length!==2?(e=ie,n=(s,u)=>ie(t(s),u),r=(s,u)=>t(s)-u):(e=t===ie||t===ri?t:ii,n=t,r=t);function i(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<0?l=f+1:c=f}while(l<c)}return l}function a(s,u,l=0,c=s.length){if(l<c){if(e(u,u)!==0)return c;do{const f=l+c>>>1;n(s[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(s,u,l=0,c=s.length){const f=i(s,u,l,c-1);return f>l&&r(s[f-1],u)>-r(s[f],u)?f-1:f}return{left:i,center:o,right:a}}function ii(){return 0}function ai(t){return t===null?NaN:+t}const oi=rr(ie),si=oi.right;rr(ai).center;const ui=Math.sqrt(50),li=Math.sqrt(10),ci=Math.sqrt(2);function le(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=ui?10:a>=li?5:a>=ci?2:1;let s,u,l;return i<0?(l=Math.pow(10,-i)/o,s=Math.round(t*l),u=Math.round(e*l),s/l<t&&++s,u/l>e&&--u,l=-l):(l=Math.pow(10,i)*o,s=Math.round(t/l),u=Math.round(e/l),s*l<t&&++s,u*l>e&&--u),u<s&&.5<=n&&n<2?le(t,e,n*2):[s,u,l]}function fi(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?le(e,t,n):le(t,e,n);if(!(a>=i))return[];const s=a-i+1,u=new Array(s);if(r)if(o<0)for(let l=0;l<s;++l)u[l]=(a-l)/-o;else for(let l=0;l<s;++l)u[l]=(a-l)*o;else if(o<0)for(let l=0;l<s;++l)u[l]=(i+l)/-o;else for(let l=0;l<s;++l)u[l]=(i+l)*o;return u}function Le(t,e,n){return e=+e,t=+t,n=+n,le(t,e,n)[2]}function hi(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Le(e,t,n):Le(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function _n(t,e){let n=0,r=0;for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);if(n)return r/n}function di(t){return t}var Ae=1,$e=2,qe=3,qt=4,vn=1e-6;function pi(t){return"translate("+t+",0)"}function gi(t){return"translate(0,"+t+")"}function mi(t){return e=>+t(e)}function yi(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function _i(){return!this.__axis}function ir(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=t===Ae||t===qt?-1:1,c=t===qt||t===$e?"x":"y",f=t===Ae||t===qe?pi:gi;function h(d){var w=r??(e.ticks?e.ticks.apply(e,n):e.domain()),M=i??(e.tickFormat?e.tickFormat.apply(e,n):di),p=Math.max(a,0)+s,m=e.range(),y=+m[0]+u,g=+m[m.length-1]+u,b=(e.bandwidth?yi:mi)(e.copy(),u),v=d.selection?d.selection():d,F=v.selectAll(".domain").data([null]),E=v.selectAll(".tick").data(w,e).order(),A=E.exit(),B=E.enter().append("g").attr("class","tick"),C=E.select("line"),x=E.select("text");F=F.merge(F.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(B),C=C.merge(B.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),x=x.merge(B.append("text").attr("fill","currentColor").attr(c,l*p).attr("dy",t===Ae?"0em":t===qe?"0.71em":"0.32em")),d!==v&&(F=F.transition(d),E=E.transition(d),C=C.transition(d),x=x.transition(d),A=A.transition(d).attr("opacity",vn).attr("transform",function(D){return isFinite(D=b(D))?f(D+u):this.getAttribute("transform")}),B.attr("opacity",vn).attr("transform",function(D){var $=this.parentNode.__axis;return f(($&&isFinite($=$(D))?$:b(D))+u)})),A.remove(),F.attr("d",t===qt||t===$e?o?"M"+l*o+","+y+"H"+u+"V"+g+"H"+l*o:"M"+u+","+y+"V"+g:o?"M"+y+","+l*o+"V"+u+"H"+g+"V"+l*o:"M"+y+","+u+"H"+g),E.attr("opacity",1).attr("transform",function(D){return f(b(D)+u)}),C.attr(c+"2",l*a),x.attr(c,l*p).text(M),v.filter(_i).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===$e?"start":t===qt?"end":"middle"),v.each(function(){this.__axis=b})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(s=+d,h):s},h.offset=function(d){return arguments.length?(u=+d,h):u},h}function Ne(t){return ir(qe,t)}function vi(t){return ir(qt,t)}var wi={value:()=>{}};function rn(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ae(n)}function ae(t){this._=t}function xi(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ae.prototype=rn.prototype={constructor:ae,on:function(t,e){var n=this._,r=xi(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=bi(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=wn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=wn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ae(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function bi(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function wn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=wi,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Xe="http://www.w3.org/1999/xhtml";const xn={svg:"http://www.w3.org/2000/svg",xhtml:Xe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function we(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),xn.hasOwnProperty(e)?{space:xn[e],local:t}:t}function ki(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Xe&&e.documentElement.namespaceURI===Xe?e.createElement(t):e.createElementNS(n,t)}}function Mi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ar(t){var e=we(t);return(e.local?Mi:ki)(e)}function Ai(){}function an(t){return t==null?Ai:function(){return this.querySelector(t)}}function $i(t){typeof t!="function"&&(t=an(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=a[c])&&(l=t.call(u,u.__data__,c,a))&&("__data__"in u&&(l.__data__=u.__data__),s[c]=l);return new ot(r,this._parents)}function Ni(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ei(){return[]}function or(t){return t==null?Ei:function(){return this.querySelectorAll(t)}}function Si(t){return function(){return Ni(t.apply(this,arguments))}}function Ci(t){typeof t=="function"?t=Si(t):t=or(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&(r.push(t.call(u,u.__data__,l,o)),i.push(u));return new ot(r,i)}function sr(t){return function(){return this.matches(t)}}function ur(t){return function(e){return e.matches(t)}}var Ti=Array.prototype.find;function Fi(t){return function(){return Ti.call(this.children,t)}}function Di(){return this.firstElementChild}function Ri(t){return this.select(t==null?Di:Fi(typeof t=="function"?t:ur(t)))}var zi=Array.prototype.filter;function Pi(){return Array.from(this.children)}function Ii(t){return function(){return zi.call(this.children,t)}}function Oi(t){return this.selectAll(t==null?Pi:Ii(typeof t=="function"?t:ur(t)))}function Hi(t){typeof t!="function"&&(t=sr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&s.push(u);return new ot(r,this._parents)}function lr(t){return new Array(t.length)}function Li(){return new ot(this._enter||this._groups.map(lr),this._parents)}function ce(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ce.prototype={constructor:ce,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function qi(t){return function(){return t}}function Xi(t,e,n,r,i,a){for(var o=0,s,u=e.length,l=a.length;o<l;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new ce(t,a[o]);for(;o<u;++o)(s=e[o])&&(i[o]=s)}function Vi(t,e,n,r,i,a,o){var s,u,l=new Map,c=e.length,f=a.length,h=new Array(c),d;for(s=0;s<c;++s)(u=e[s])&&(h[s]=d=o.call(u,u.__data__,s,e)+"",l.has(d)?i[s]=u:l.set(d,u));for(s=0;s<f;++s)d=o.call(t,a[s],s,a)+"",(u=l.get(d))?(r[s]=u,u.__data__=a[s],l.delete(d)):n[s]=new ce(t,a[s]);for(s=0;s<c;++s)(u=e[s])&&l.get(h[s])===u&&(i[s]=u)}function Bi(t){return t.__data__}function Yi(t,e){if(!arguments.length)return Array.from(this,Bi);var n=e?Vi:Xi,r=this._parents,i=this._groups;typeof t!="function"&&(t=qi(t));for(var a=i.length,o=new Array(a),s=new Array(a),u=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=Ui(t.call(c,c&&c.__data__,l,r)),w=d.length,M=s[l]=new Array(w),p=o[l]=new Array(w),m=u[l]=new Array(h);n(c,f,M,p,m,d,e);for(var y=0,g=0,b,v;y<w;++y)if(b=M[y]){for(y>=g&&(g=y+1);!(v=p[g])&&++g<w;);b._next=v||null}}return o=new ot(o,r),o._enter=s,o._exit=u,o}function Ui(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Gi(){return new ot(this._exit||this._groups.map(lr),this._parents)}function Ki(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function Wi(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,h=s[u]=new Array(f),d,w=0;w<f;++w)(d=l[w]||c[w])&&(h[w]=d);for(;u<i;++u)s[u]=n[u];return new ot(s,this._parents)}function Zi(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Qi(t){t||(t=Ji);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,u=i[a]=new Array(s),l,c=0;c<s;++c)(l=o[c])&&(u[c]=l);u.sort(e)}return new ot(i,this._parents).order()}function Ji(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ji(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ta(){return Array.from(this)}function ea(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function na(){let t=0;for(const e of this)++t;return t}function ra(){return!this.node()}function ia(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function aa(t){return function(){this.removeAttribute(t)}}function oa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function sa(t,e){return function(){this.setAttribute(t,e)}}function ua(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function la(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ca(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function fa(t,e){var n=we(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?oa:aa:typeof e=="function"?n.local?ca:la:n.local?ua:sa)(n,e))}function cr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ha(t){return function(){this.style.removeProperty(t)}}function da(t,e,n){return function(){this.style.setProperty(t,e,n)}}function pa(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ga(t,e,n){return arguments.length>1?this.each((e==null?ha:typeof e=="function"?pa:da)(t,e,n??"")):zt(this.node(),t)}function zt(t,e){return t.style.getPropertyValue(e)||cr(t).getComputedStyle(t,null).getPropertyValue(e)}function ma(t){return function(){delete this[t]}}function ya(t,e){return function(){this[t]=e}}function _a(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function va(t,e){return arguments.length>1?this.each((e==null?ma:typeof e=="function"?_a:ya)(t,e)):this.node()[t]}function fr(t){return t.trim().split(/^|\s+/)}function on(t){return t.classList||new hr(t)}function hr(t){this._node=t,this._names=fr(t.getAttribute("class")||"")}hr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function dr(t,e){for(var n=on(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function pr(t,e){for(var n=on(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function wa(t){return function(){dr(this,t)}}function xa(t){return function(){pr(this,t)}}function ba(t,e){return function(){(e.apply(this,arguments)?dr:pr)(this,t)}}function ka(t,e){var n=fr(t+"");if(arguments.length<2){for(var r=on(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?ba:e?wa:xa)(n,e))}function Ma(){this.textContent=""}function Aa(t){return function(){this.textContent=t}}function $a(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Na(t){return arguments.length?this.each(t==null?Ma:(typeof t=="function"?$a:Aa)(t)):this.node().textContent}function Ea(){this.innerHTML=""}function Sa(t){return function(){this.innerHTML=t}}function Ca(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ta(t){return arguments.length?this.each(t==null?Ea:(typeof t=="function"?Ca:Sa)(t)):this.node().innerHTML}function Fa(){this.nextSibling&&this.parentNode.appendChild(this)}function Da(){return this.each(Fa)}function Ra(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function za(){return this.each(Ra)}function Pa(t){var e=typeof t=="function"?t:ar(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ia(){return null}function Oa(t,e){var n=typeof t=="function"?t:ar(t),r=e==null?Ia:typeof e=="function"?e:an(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ha(){var t=this.parentNode;t&&t.removeChild(this)}function La(){return this.each(Ha)}function qa(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xa(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Va(t){return this.select(t?Xa:qa)}function Ba(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ya(t){return function(e){t.call(this,e,this.__data__)}}function Ua(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ga(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Ka(t,e,n){return function(){var r=this.__on,i,a=Ya(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Wa(t,e,n){var r=Ua(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,l=s.length,c;u<l;++u)for(i=0,c=s[u];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(s=e?Ka:Ga,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function gr(t,e,n){var r=cr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Za(t,e){return function(){return gr(this,t,e)}}function Qa(t,e){return function(){return gr(this,t,e.apply(this,arguments))}}function Ja(t,e){return this.each((typeof e=="function"?Qa:Za)(t,e))}function*ja(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var mr=[null];function ot(t,e){this._groups=t,this._parents=e}function Zt(){return new ot([[document.documentElement]],mr)}function to(){return this}ot.prototype=Zt.prototype={constructor:ot,select:$i,selectAll:Ci,selectChild:Ri,selectChildren:Oi,filter:Hi,data:Yi,enter:Li,exit:Gi,join:Ki,merge:Wi,selection:to,order:Zi,sort:Qi,call:ji,nodes:ta,node:ea,size:na,empty:ra,each:ia,attr:fa,style:ga,property:va,classed:ka,text:Na,html:Ta,raise:Da,lower:za,append:Pa,insert:Oa,remove:La,clone:Va,datum:Ba,on:Wa,dispatch:Ja,[Symbol.iterator]:ja};function it(t){return typeof t=="string"?new ot([[document.querySelector(t)]],[document.documentElement]):new ot([[t]],mr)}function eo(t){let e;for(;e=t.sourceEvent;)t=e;return t}function bn(t,e){if(t=eo(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ve={capture:!0,passive:!1};function Be(t){t.preventDefault(),t.stopImmediatePropagation()}function no(t){var e=t.document.documentElement,n=it(t).on("dragstart.drag",Be,Ve);"onselectstart"in e?n.on("selectstart.drag",Be,Ve):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ro(t,e){var n=t.document.documentElement,r=it(t).on("dragstart.drag",null);e&&(r.on("click.drag",Be,Ve),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function sn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function yr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Qt(){}var Gt=.7,fe=1/Gt,Rt="\\s*([+-]?\\d+)\\s*",Kt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",io=/^#([0-9a-f]{3,8})$/,ao=new RegExp(`^rgb\\(${Rt},${Rt},${Rt}\\)$`),oo=new RegExp(`^rgb\\(${ht},${ht},${ht}\\)$`),so=new RegExp(`^rgba\\(${Rt},${Rt},${Rt},${Kt}\\)$`),uo=new RegExp(`^rgba\\(${ht},${ht},${ht},${Kt}\\)$`),lo=new RegExp(`^hsl\\(${Kt},${ht},${ht}\\)$`),co=new RegExp(`^hsla\\(${Kt},${ht},${ht},${Kt}\\)$`),kn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sn(Qt,Et,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Mn,formatHex:Mn,formatHex8:fo,formatHsl:ho,formatRgb:An,toString:An});function Mn(){return this.rgb().formatHex()}function fo(){return this.rgb().formatHex8()}function ho(){return _r(this).formatHsl()}function An(){return this.rgb().formatRgb()}function Et(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=io.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?$n(e):n===3?new at(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?te(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?te(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ao.exec(t))?new at(e[1],e[2],e[3],1):(e=oo.exec(t))?new at(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=so.exec(t))?te(e[1],e[2],e[3],e[4]):(e=uo.exec(t))?te(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=lo.exec(t))?Sn(e[1],e[2]/100,e[3]/100,1):(e=co.exec(t))?Sn(e[1],e[2]/100,e[3]/100,e[4]):kn.hasOwnProperty(t)?$n(kn[t]):t==="transparent"?new at(NaN,NaN,NaN,0):null}function $n(t){return new at(t>>16&255,t>>8&255,t&255,1)}function te(t,e,n,r){return r<=0&&(t=e=n=NaN),new at(t,e,n,r)}function po(t){return t instanceof Qt||(t=Et(t)),t?(t=t.rgb(),new at(t.r,t.g,t.b,t.opacity)):new at}function Ye(t,e,n,r){return arguments.length===1?po(t):new at(t,e,n,r??1)}function at(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}sn(at,Ye,yr(Qt,{brighter(t){return t=t==null?fe:Math.pow(fe,t),new at(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Gt:Math.pow(Gt,t),new at(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new at(Nt(this.r),Nt(this.g),Nt(this.b),he(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Nn,formatHex:Nn,formatHex8:go,formatRgb:En,toString:En}));function Nn(){return`#${$t(this.r)}${$t(this.g)}${$t(this.b)}`}function go(){return`#${$t(this.r)}${$t(this.g)}${$t(this.b)}${$t((isNaN(this.opacity)?1:this.opacity)*255)}`}function En(){const t=he(this.opacity);return`${t===1?"rgb(":"rgba("}${Nt(this.r)}, ${Nt(this.g)}, ${Nt(this.b)}${t===1?")":`, ${t})`}`}function he(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Nt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $t(t){return t=Nt(t),(t<16?"0":"")+t.toString(16)}function Sn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new lt(t,e,n,r)}function _r(t){if(t instanceof lt)return new lt(t.h,t.s,t.l,t.opacity);if(t instanceof Qt||(t=Et(t)),!t)return new lt;if(t instanceof lt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new lt(o,s,u,t.opacity)}function mo(t,e,n,r){return arguments.length===1?_r(t):new lt(t,e,n,r??1)}function lt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}sn(lt,mo,yr(Qt,{brighter(t){return t=t==null?fe:Math.pow(fe,t),new lt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Gt:Math.pow(Gt,t),new lt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new at(Ee(t>=240?t-240:t+120,i,r),Ee(t,i,r),Ee(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new lt(Cn(this.h),ee(this.s),ee(this.l),he(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=he(this.opacity);return`${t===1?"hsl(":"hsla("}${Cn(this.h)}, ${ee(this.s)*100}%, ${ee(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Cn(t){return t=(t||0)%360,t<0?t+360:t}function ee(t){return Math.max(0,Math.min(1,t||0))}function Ee(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const un=t=>()=>t;function yo(t,e){return function(n){return t+n*e}}function _o(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function vo(t){return(t=+t)==1?vr:function(e,n){return n-e?_o(e,n,t):un(isNaN(e)?n:e)}}function vr(t,e){var n=e-t;return n?yo(t,n):un(isNaN(t)?e:t)}const de=function t(e){var n=vo(e);function r(i,a){var o=n((i=Ye(i)).r,(a=Ye(a)).r),s=n(i.g,a.g),u=n(i.b,a.b),l=vr(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=t,r}(1);function wo(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function xo(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bo(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=xe(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function ko(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ut(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Mo(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=xe(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Ue=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Se=new RegExp(Ue.source,"g");function Ao(t){return function(){return t}}function $o(t){return function(e){return t(e)+""}}function wr(t,e){var n=Ue.lastIndex=Se.lastIndex=0,r,i,a,o=-1,s=[],u=[];for(t=t+"",e=e+"";(r=Ue.exec(t))&&(i=Se.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:ut(r,i)})),n=Se.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?$o(u[0].x):Ao(e):(e=u.length,function(l){for(var c=0,f;c<e;++c)s[(f=u[c]).i]=f.x(l);return s.join("")})}function xe(t,e){var n=typeof e,r;return e==null||n==="boolean"?un(e):(n==="number"?ut:n==="string"?(r=Et(e))?(e=r,de):wr:e instanceof Et?de:e instanceof Date?ko:xo(e)?wo:Array.isArray(e)?bo:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Mo:ut)(t,e)}function No(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Tn=180/Math.PI,Ge={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xr(t,e,n,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Tn,skewX:Math.atan(u)*Tn,scaleX:o,scaleY:s}}var ne;function Eo(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ge:xr(e.a,e.b,e.c,e.d,e.e,e.f)}function So(t){return t==null||(ne||(ne=document.createElementNS("http://www.w3.org/2000/svg","g")),ne.setAttribute("transform",t),!(t=ne.transform.baseVal.consolidate()))?Ge:(t=t.matrix,xr(t.a,t.b,t.c,t.d,t.e,t.f))}function br(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,w){if(l!==f||c!==h){var M=d.push("translate(",null,e,null,n);w.push({i:M-4,x:ut(l,f)},{i:M-2,x:ut(c,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:ut(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function s(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:ut(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,h,d,w){if(l!==f||c!==h){var M=d.push(i(d)+"scale(",null,",",null,")");w.push({i:M-4,x:ut(l,f)},{i:M-2,x:ut(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=t(l),c=t(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),s(l.skewX,c.skewX,f,h),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var w=-1,M=h.length,p;++w<M;)f[(p=h[w]).i]=p.x(d);return f.join("")}}}var Co=br(Eo,"px, ","px)","deg)"),To=br(So,", ",")",")"),Pt=0,Xt=0,Ht=0,kr=1e3,pe,Vt,ge=0,St=0,be=0,Wt=typeof performance=="object"&&performance.now?performance:Date,Mr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ln(){return St||(Mr(Fo),St=Wt.now()+be)}function Fo(){St=0}function me(){this._call=this._time=this._next=null}me.prototype=Ar.prototype={constructor:me,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ln():+n)+(e==null?0:+e),!this._next&&Vt!==this&&(Vt?Vt._next=this:pe=this,Vt=this),this._call=t,this._time=n,Ke()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ke())}};function Ar(t,e,n){var r=new me;return r.restart(t,e,n),r}function Do(){ln(),++Pt;for(var t=pe,e;t;)(e=St-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Pt}function Fn(){St=(ge=Wt.now())+be,Pt=Xt=0;try{Do()}finally{Pt=0,zo(),St=0}}function Ro(){var t=Wt.now(),e=t-ge;e>kr&&(be-=e,ge=t)}function zo(){for(var t,e=pe,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:pe=n);Vt=t,Ke(r)}function Ke(t){if(!Pt){Xt&&(Xt=clearTimeout(Xt));var e=t-St;e>24?(t<1/0&&(Xt=setTimeout(Fn,t-Wt.now()-be)),Ht&&(Ht=clearInterval(Ht))):(Ht||(ge=Wt.now(),Ht=setInterval(Ro,kr)),Pt=1,Mr(Fn))}}function Dn(t,e,n){var r=new me;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Po=rn("start","end","cancel","interrupt"),Io=[],$r=0,Rn=1,We=2,oe=3,zn=4,Ze=5,se=6;function ke(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Oo(t,n,{name:e,index:r,group:i,on:Po,tween:Io,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:$r})}function cn(t,e){var n=ct(t,e);if(n.state>$r)throw new Error("too late; already scheduled");return n}function dt(t,e){var n=ct(t,e);if(n.state>oe)throw new Error("too late; already running");return n}function ct(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Oo(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Ar(a,0,n.time);function a(l){n.state=Rn,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==Rn)return u();for(c in r)if(d=r[c],d.name===n.name){if(d.state===oe)return Dn(o);d.state===zn?(d.state=se,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=se,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(Dn(function(){n.state===oe&&(n.state=zn,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=We,n.on.call("start",t,t.__data__,n.index,n.group),n.state===We){for(n.state=oe,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function s(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=Ze,1),f=-1,h=i.length;++f<h;)i[f].call(t,c);n.state===Ze&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=se,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Qe(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>We&&r.state<Ze,r.state=se,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function Ho(t){return this.each(function(){Qe(this,t)})}function Lo(t,e){var n,r;return function(){var i=dt(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function qo(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=dt(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=s;break}u===l&&i.push(s)}a.tween=i}}function Xo(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=ct(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Lo:qo)(n,t,e))}function fn(t,e,n){var r=t._id;return t.each(function(){var i=dt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return ct(i,r).value[e]}}function Nr(t,e){var n;return(typeof e=="number"?ut:e instanceof Et?de:(n=Et(e))?(e=n,de):wr)(t,e)}function Vo(t){return function(){this.removeAttribute(t)}}function Bo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yo(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function Uo(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function Go(t,e,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,s)))}}function Ko(t,e,n){var r,i,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=s+"",o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,s)))}}function Wo(t,e){var n=we(t),r=n==="transform"?To:Nr;return this.attrTween(t,typeof e=="function"?(n.local?Ko:Go)(n,r,fn(this,"attr."+t,e)):e==null?(n.local?Bo:Vo)(n):(n.local?Uo:Yo)(n,r,e))}function Zo(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Qo(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Jo(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Qo(t,a)),n}return i._value=e,i}function jo(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&Zo(t,a)),n}return i._value=e,i}function ts(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=we(t);return this.tween(n,(r.local?Jo:jo)(r,e))}function es(t,e){return function(){cn(this,t).delay=+e.apply(this,arguments)}}function ns(t,e){return e=+e,function(){cn(this,t).delay=e}}function rs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?es:ns)(e,t)):ct(this.node(),e).delay}function is(t,e){return function(){dt(this,t).duration=+e.apply(this,arguments)}}function as(t,e){return e=+e,function(){dt(this,t).duration=e}}function os(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?is:as)(e,t)):ct(this.node(),e).duration}function ss(t,e){if(typeof e!="function")throw new Error;return function(){dt(this,t).ease=e}}function us(t){var e=this._id;return arguments.length?this.each(ss(e,t)):ct(this.node(),e).ease}function ls(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;dt(this,t).ease=n}}function cs(t){if(typeof t!="function")throw new Error;return this.each(ls(this._id,t))}function fs(t){typeof t!="function"&&(t=sr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],u,l=0;l<o;++l)(u=a[l])&&t.call(u,u.__data__,l,a)&&s.push(u);return new mt(r,this._parents,this._name,this._id)}function hs(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var u=e[s],l=n[s],c=u.length,f=o[s]=new Array(c),h,d=0;d<c;++d)(h=u[d]||l[d])&&(f[d]=h);for(;s<r;++s)o[s]=e[s];return new mt(o,this._parents,this._name,this._id)}function ds(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ps(t,e,n){var r,i,a=ds(e)?cn:dt;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function gs(t,e){var n=this._id;return arguments.length<2?ct(this.node(),n).on.on(t):this.each(ps(n,t,e))}function ms(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ys(){return this.on("end.remove",ms(this._id))}function _s(t){var e=this._name,n=this._id;typeof t!="function"&&(t=an(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],u=s.length,l=a[o]=new Array(u),c,f,h=0;h<u;++h)(c=s[h])&&(f=t.call(c,c.__data__,h,s))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,ke(l[h],e,n,h,l,ct(c,n)));return new mt(a,this._parents,e,n)}function vs(t){var e=this._name,n=this._id;typeof t!="function"&&(t=or(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var u=r[s],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var h=t.call(c,c.__data__,f,u),d,w=ct(c,n),M=0,p=h.length;M<p;++M)(d=h[M])&&ke(d,e,n,M,h,w);a.push(h),o.push(c)}return new mt(a,o,e,n)}var ws=Zt.prototype.constructor;function xs(){return new ws(this._groups,this._parents)}function bs(t,e){var n,r,i;return function(){var a=zt(this,t),o=(this.style.removeProperty(t),zt(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function Er(t){return function(){this.style.removeProperty(t)}}function ks(t,e,n){var r,i=n+"",a;return function(){var o=zt(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function Ms(t,e,n){var r,i,a;return function(){var o=zt(this,t),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),zt(this,t))),o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,s))}}function As(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var u=dt(this,t),l=u.on,c=u.value[a]==null?s||(s=Er(e)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function $s(t,e,n){var r=(t+="")=="transform"?Co:Nr;return e==null?this.styleTween(t,bs(t,r)).on("end.style."+t,Er(t)):typeof e=="function"?this.styleTween(t,Ms(t,r,fn(this,"style."+t,e))).each(As(this._id,t)):this.styleTween(t,ks(t,r,e),n).on("end.style."+t,null)}function Ns(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Es(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Ns(t,o,n)),r}return a._value=e,a}function Ss(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Es(t,e,n??""))}function Cs(t){return function(){this.textContent=t}}function Ts(t){return function(){var e=t(this);this.textContent=e??""}}function Fs(t){return this.tween("text",typeof t=="function"?Ts(fn(this,"text",t)):Cs(t==null?"":t+""))}function Ds(t){return function(e){this.textContent=t.call(this,e)}}function Rs(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ds(i)),e}return r._value=t,r}function zs(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Rs(t))}function Ps(){for(var t=this._name,e=this._id,n=Sr(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)if(u=o[l]){var c=ct(u,e);ke(u,t,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new mt(r,this._parents,t,n)}function Is(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--i===0&&a()}};n.each(function(){var l=dt(this,r),c=l.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),l.on=e}),i===0&&a()})}var Os=0;function mt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Sr(){return++Os}var pt=Zt.prototype;mt.prototype={constructor:mt,select:_s,selectAll:vs,selectChild:pt.selectChild,selectChildren:pt.selectChildren,filter:fs,merge:hs,selection:xs,transition:Ps,call:pt.call,nodes:pt.nodes,node:pt.node,size:pt.size,empty:pt.empty,each:pt.each,on:gs,attr:Wo,attrTween:ts,style:$s,styleTween:Ss,text:Fs,textTween:zs,remove:ys,tween:Xo,delay:rs,duration:os,ease:us,easeVarying:cs,end:Is,[Symbol.iterator]:pt[Symbol.iterator]};function Hs(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ls={time:null,delay:0,duration:250,ease:Hs};function qs(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Xs(t){var e,n;t instanceof mt?(e=t._id,t=t._name):(e=Sr(),(n=Ls).time=ln(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,u,l=0;l<s;++l)(u=o[l])&&ke(u,t,e,l,o,n||qs(u,e));return new mt(r,this._parents,t,e)}Zt.prototype.interrupt=Ho;Zt.prototype.transition=Xs;const Ce=t=>()=>t;function Vs(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function Bs(t){t.stopImmediatePropagation()}function Te(t){t.preventDefault(),t.stopImmediatePropagation()}var Pn={name:"drag"},Fe={name:"space"},Ct={name:"handle"},Tt={name:"center"};const{abs:In,max:Q,min:J}=Math;function On(t){return[+t[0],+t[1]]}function Hn(t){return[On(t[0]),On(t[1])]}var ue={name:"x",handles:["w","e"].map(Je),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},De={},gt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ln={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},qn={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ys={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Us={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Je(t){return{type:t}}function Gs(t){return!t.ctrlKey&&!t.button}function Ks(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ws(){return navigator.maxTouchPoints||"ontouchstart"in this}function Re(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Zs(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Qs(){return Js(ue)}function Js(t){var e=Ks,n=Gs,r=Ws,i=!0,a=rn("start","brush","end"),o=6,s;function u(p){var m=p.property("__brush",M).selectAll(".overlay").data([Je("overlay")]);m.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",gt.overlay).merge(m).each(function(){var g=Re(this).extent;it(this).attr("x",g[0][0]).attr("y",g[0][1]).attr("width",g[1][0]-g[0][0]).attr("height",g[1][1]-g[0][1])}),p.selectAll(".selection").data([Je("selection")]).enter().append("rect").attr("class","selection").attr("cursor",gt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var y=p.selectAll(".handle").data(t.handles,function(g){return g.type});y.exit().remove(),y.enter().append("rect").attr("class",function(g){return"handle handle--"+g.type}).attr("cursor",function(g){return gt[g.type]}),p.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(p,m,y){p.tween?p.on("start.brush",function(g){c(this,arguments).beforestart().start(g)}).on("interrupt.brush end.brush",function(g){c(this,arguments).end(g)}).tween("brush",function(){var g=this,b=g.__brush,v=c(g,arguments),F=b.selection,E=t.input(typeof m=="function"?m.apply(this,arguments):m,b.extent),A=xe(F,E);function B(C){b.selection=C===1&&E===null?null:A(C),l.call(g),v.brush()}return F!==null&&E!==null?B:B(1)}):p.each(function(){var g=this,b=arguments,v=g.__brush,F=t.input(typeof m=="function"?m.apply(g,b):m,v.extent),E=c(g,b).beforestart();Qe(g),v.selection=F===null?null:F,l.call(g),E.start(y).brush(y).end(y)})},u.clear=function(p,m){u.move(p,null,m)};function l(){var p=it(this),m=Re(this).selection;m?(p.selectAll(".selection").style("display",null).attr("x",m[0][0]).attr("y",m[0][1]).attr("width",m[1][0]-m[0][0]).attr("height",m[1][1]-m[0][1]),p.selectAll(".handle").style("display",null).attr("x",function(y){return y.type[y.type.length-1]==="e"?m[1][0]-o/2:m[0][0]-o/2}).attr("y",function(y){return y.type[0]==="s"?m[1][1]-o/2:m[0][1]-o/2}).attr("width",function(y){return y.type==="n"||y.type==="s"?m[1][0]-m[0][0]+o:o}).attr("height",function(y){return y.type==="e"||y.type==="w"?m[1][1]-m[0][1]+o:o})):p.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(p,m,y){var g=p.__brush.emitter;return g&&(!y||!g.clean)?g:new f(p,m,y)}function f(p,m,y){this.that=p,this.args=m,this.state=p.__brush,this.active=0,this.clean=y}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(p,m){return this.starting?(this.starting=!1,this.emit("start",p,m)):this.emit("brush",p),this},brush:function(p,m){return this.emit("brush",p,m),this},end:function(p,m){return--this.active===0&&(delete this.state.emitter,this.emit("end",p,m)),this},emit:function(p,m,y){var g=it(this.that).datum();a.call(p,this.that,new Vs(p,{sourceEvent:m,target:u,selection:t.output(this.state.selection),mode:y,dispatch:a}),g)}};function h(p){if(s&&!p.touches||!n.apply(this,arguments))return;var m=this,y=p.target.__data__.type,g=(i&&p.metaKey?y="overlay":y)==="selection"?Pn:i&&p.altKey?Tt:Ct,b=t===De?null:Ys[y],v=t===ue?null:Us[y],F=Re(m),E=F.extent,A=F.selection,B=E[0][0],C,x,D=E[0][1],$,R,j=E[1][0],H,L,K=E[1][1],T,Y,O=0,X=0,wt,xt=b&&v&&i&&p.shiftKey,ft,bt,W=Array.from(p.touches||[p],_=>{const k=_.identifier;return _=bn(_,m),_.point0=_.slice(),_.identifier=k,_});Qe(m);var kt=c(m,arguments,!0).beforestart();if(y==="overlay"){A&&(wt=!0);const _=[W[0],W[1]||W[0]];F.selection=A=[[C=t===De?B:J(_[0][0],_[1][0]),$=t===ue?D:J(_[0][1],_[1][1])],[H=t===De?j:Q(_[0][0],_[1][0]),T=t===ue?K:Q(_[0][1],_[1][1])]],W.length>1&&U(p)}else C=A[0][0],$=A[0][1],H=A[1][0],T=A[1][1];x=C,R=$,L=H,Y=T;var S=it(m).attr("pointer-events","none"),q=S.selectAll(".overlay").attr("cursor",gt[y]);if(p.touches)kt.moved=N,kt.ended=V;else{var z=it(p.view).on("mousemove.brush",N,!0).on("mouseup.brush",V,!0);i&&z.on("keydown.brush",tt,!0).on("keyup.brush",Z,!0),no(p.view)}l.call(m),kt.start(p,g.name);function N(_){for(const k of _.changedTouches||[_])for(const et of W)et.identifier===k.identifier&&(et.cur=bn(k,m));if(xt&&!ft&&!bt&&W.length===1){const k=W[0];In(k.cur[0]-k[0])>In(k.cur[1]-k[1])?bt=!0:ft=!0}for(const k of W)k.cur&&(k[0]=k.cur[0],k[1]=k.cur[1]);wt=!0,Te(_),U(_)}function U(_){const k=W[0],et=k.point0;var G;switch(O=k[0]-et[0],X=k[1]-et[1],g){case Fe:case Pn:{b&&(O=Q(B-C,J(j-H,O)),x=C+O,L=H+O),v&&(X=Q(D-$,J(K-T,X)),R=$+X,Y=T+X);break}case Ct:{W[1]?(b&&(x=Q(B,J(j,W[0][0])),L=Q(B,J(j,W[1][0])),b=1),v&&(R=Q(D,J(K,W[0][1])),Y=Q(D,J(K,W[1][1])),v=1)):(b<0?(O=Q(B-C,J(j-C,O)),x=C+O,L=H):b>0&&(O=Q(B-H,J(j-H,O)),x=C,L=H+O),v<0?(X=Q(D-$,J(K-$,X)),R=$+X,Y=T):v>0&&(X=Q(D-T,J(K-T,X)),R=$,Y=T+X));break}case Tt:{b&&(x=Q(B,J(j,C-O*b)),L=Q(B,J(j,H+O*b))),v&&(R=Q(D,J(K,$-X*v)),Y=Q(D,J(K,T+X*v)));break}}L<x&&(b*=-1,G=C,C=H,H=G,G=x,x=L,L=G,y in Ln&&q.attr("cursor",gt[y=Ln[y]])),Y<R&&(v*=-1,G=$,$=T,T=G,G=R,R=Y,Y=G,y in qn&&q.attr("cursor",gt[y=qn[y]])),F.selection&&(A=F.selection),ft&&(x=A[0][0],L=A[1][0]),bt&&(R=A[0][1],Y=A[1][1]),(A[0][0]!==x||A[0][1]!==R||A[1][0]!==L||A[1][1]!==Y)&&(F.selection=[[x,R],[L,Y]],l.call(m),kt.brush(_,g.name))}function V(_){if(Bs(_),_.touches){if(_.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else ro(_.view,wt),z.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);S.attr("pointer-events","all"),q.attr("cursor",gt.overlay),F.selection&&(A=F.selection),Zs(A)&&(F.selection=null,l.call(m)),kt.end(_,g.name)}function tt(_){switch(_.keyCode){case 16:{xt=b&&v;break}case 18:{g===Ct&&(b&&(H=L-O*b,C=x+O*b),v&&(T=Y-X*v,$=R+X*v),g=Tt,U(_));break}case 32:{(g===Ct||g===Tt)&&(b<0?H=L-O:b>0&&(C=x-O),v<0?T=Y-X:v>0&&($=R-X),g=Fe,q.attr("cursor",gt.selection),U(_));break}default:return}Te(_)}function Z(_){switch(_.keyCode){case 16:{xt&&(ft=bt=xt=!1,U(_));break}case 18:{g===Tt&&(b<0?H=L:b>0&&(C=x),v<0?T=Y:v>0&&($=R),g=Ct,U(_));break}case 32:{g===Fe&&(_.altKey?(b&&(H=L-O*b,C=x+O*b),v&&(T=Y-X*v,$=R+X*v),g=Tt):(b<0?H=L:b>0&&(C=x),v<0?T=Y:v>0&&($=R),g=Ct),q.attr("cursor",gt[y]),U(_));break}default:return}Te(_)}}function d(p){c(this,arguments).moved(p)}function w(p){c(this,arguments).ended(p)}function M(){var p=this.__brush||{selection:null};return p.extent=Hn(e.apply(this,arguments)),p.dim=t,p}return u.extent=function(p){return arguments.length?(e=typeof p=="function"?p:Ce(Hn(p)),u):e},u.filter=function(p){return arguments.length?(n=typeof p=="function"?p:Ce(!!p),u):n},u.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:Ce(!!p),u):r},u.handleSize=function(p){return arguments.length?(o=+p,u):o},u.keyModifiers=function(p){return arguments.length?(i=!!p,u):i},u.on=function(){var p=a.on.apply(a,arguments);return p===a?u:p},u}const je=Math.PI,tn=2*je,At=1e-6,js=tn-At;function Cr(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function tu(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Cr;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class eu{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Cr:tu(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,u=r-e,l=i-n,c=o-e,f=s-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>At)if(!(Math.abs(f*u-l*c)>At)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-o,w=i-s,M=u*u+l*l,p=d*d+w*w,m=Math.sqrt(M),y=Math.sqrt(h),g=a*Math.tan((je-Math.acos((M+h-p)/(2*m*y)))/2),b=g/y,v=g/m;Math.abs(b-1)>At&&this._append`L${e+b*c},${n+b*f}`,this._append`A${a},${a},0,0,${+(f*d>c*w)},${this._x1=e+v*u},${this._y1=n+v*l}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),u=r*Math.sin(i),l=e+s,c=n+u,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>At||Math.abs(this._y1-c)>At)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%tn+tn),h>js?this._append`A${r},${r},0,1,${f},${e-s},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>At&&this._append`A${r},${r},0,${+(h>=je)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}var Xn={},ze={},Pe=34,Lt=10,Ie=13;function Tr(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function nu(t,e){var n=Tr(t);return function(r,i){return e(n(r),i,t)}}function Vn(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function rt(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function ru(t){return t<0?"-"+rt(-t,6):t>9999?"+"+rt(t,6):rt(t,4)}function iu(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":ru(t.getUTCFullYear())+"-"+rt(t.getUTCMonth()+1,2)+"-"+rt(t.getUTCDate(),2)+(i?"T"+rt(e,2)+":"+rt(n,2)+":"+rt(r,2)+"."+rt(i,3)+"Z":r?"T"+rt(e,2)+":"+rt(n,2)+":"+rt(r,2)+"Z":n||e?"T"+rt(e,2)+":"+rt(n,2)+"Z":"")}function au(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,h){var d,w,M=i(f,function(p,m){if(d)return d(p,m-1);w=p,d=h?nu(p,h):Tr(p)});return M.columns=w||[],M}function i(f,h){var d=[],w=f.length,M=0,p=0,m,y=w<=0,g=!1;f.charCodeAt(w-1)===Lt&&--w,f.charCodeAt(w-1)===Ie&&--w;function b(){if(y)return ze;if(g)return g=!1,Xn;var F,E=M,A;if(f.charCodeAt(E)===Pe){for(;M++<w&&f.charCodeAt(M)!==Pe||f.charCodeAt(++M)===Pe;);return(F=M)>=w?y=!0:(A=f.charCodeAt(M++))===Lt?g=!0:A===Ie&&(g=!0,f.charCodeAt(M)===Lt&&++M),f.slice(E+1,F-1).replace(/""/g,'"')}for(;M<w;){if((A=f.charCodeAt(F=M++))===Lt)g=!0;else if(A===Ie)g=!0,f.charCodeAt(M)===Lt&&++M;else if(A!==n)continue;return f.slice(E,F)}return y=!0,f.slice(E,w)}for(;(m=b())!==ze;){for(var v=[];m!==Xn&&m!==ze;)v.push(m),m=b();h&&(v=h(v,p++))==null||d.push(v)}return d}function a(f,h){return f.map(function(d){return h.map(function(w){return c(d[w])}).join(t)})}function o(f,h){return h==null&&(h=Vn(f)),[h.map(c).join(t)].concat(a(f,h)).join(`
`)}function s(f,h){return h==null&&(h=Vn(f)),a(f,h).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(t)}function c(f){return f==null?"":f instanceof Date?iu(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:u,formatRow:l,formatValue:c}}var ou=au(","),su=ou.parse;function uu(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ye(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function It(t){return t=ye(Math.abs(t)),t?t[1]:NaN}function lu(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function cu(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var fu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _e(t){if(!(e=fu.exec(t)))throw new Error("invalid format: "+t);var e;return new hn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}_e.prototype=hn.prototype;function hn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}hn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hu(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Fr;function du(t,e){var n=ye(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(Fr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+ye(t,Math.max(0,e+a-1))[0]}function Bn(t,e){var n=ye(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Yn={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:uu,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Bn(t*100,e),r:Bn,s:du,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Un(t){return t}var Gn=Array.prototype.map,Kn=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function pu(t){var e=t.grouping===void 0||t.thousands===void 0?Un:lu(Gn.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Un:cu(Gn.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function l(f){f=_e(f);var h=f.fill,d=f.align,w=f.sign,M=f.symbol,p=f.zero,m=f.width,y=f.comma,g=f.precision,b=f.trim,v=f.type;v==="n"?(y=!0,v="g"):Yn[v]||(g===void 0&&(g=12),b=!0,v="g"),(p||h==="0"&&d==="=")&&(p=!0,h="0",d="=");var F=M==="$"?n:M==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",E=M==="$"?r:/[%p]/.test(v)?o:"",A=Yn[v],B=/[defgprs%]/.test(v);g=g===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));function C(x){var D=F,$=E,R,j,H;if(v==="c")$=A(x)+$,x="";else{x=+x;var L=x<0||1/x<0;if(x=isNaN(x)?u:A(Math.abs(x),g),b&&(x=hu(x)),L&&+x==0&&w!=="+"&&(L=!1),D=(L?w==="("?w:s:w==="-"||w==="("?"":w)+D,$=(v==="s"?Kn[8+Fr/3]:"")+$+(L&&w==="("?")":""),B){for(R=-1,j=x.length;++R<j;)if(H=x.charCodeAt(R),48>H||H>57){$=(H===46?i+x.slice(R+1):x.slice(R))+$,x=x.slice(0,R);break}}}y&&!p&&(x=e(x,1/0));var K=D.length+x.length+$.length,T=K<m?new Array(m-K+1).join(h):"";switch(y&&p&&(x=e(T+x,T.length?m-$.length:1/0),T=""),d){case"<":x=D+x+$+T;break;case"=":x=D+T+x+$;break;case"^":x=T.slice(0,K=T.length>>1)+D+x+$+T.slice(K);break;default:x=T+D+x+$;break}return a(x)}return C.toString=function(){return f+""},C}function c(f,h){var d=l((f=_e(f),f.type="f",f)),w=Math.max(-8,Math.min(8,Math.floor(It(h)/3)))*3,M=Math.pow(10,-w),p=Kn[8+w/3];return function(m){return d(M*m)+p}}return{format:l,formatPrefix:c}}var re,Dr,Rr;gu({thousands:",",grouping:[3],currency:["$",""]});function gu(t){return re=pu(t),Dr=re.format,Rr=re.formatPrefix,re}function mu(t){return Math.max(0,-It(Math.abs(t)))}function yu(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(It(e)/3)))*3-It(Math.abs(t)))}function _u(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,It(e)-It(t))+1}function vu(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function wu(t){return function(){return t}}function xu(t){return+t}var Wn=[0,1];function Dt(t){return t}function en(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:wu(isNaN(e)?NaN:.5)}function bu(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function ku(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=en(i,r),a=n(o,a)):(r=en(r,i),a=n(a,o)),function(s){return a(r(s))}}function Mu(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=en(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var u=si(t,s,1,r)-1;return a[u](i[u](s))}}function Au(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $u(){var t=Wn,e=Wn,n=xe,r,i,a,o=Dt,s,u,l;function c(){var h=Math.min(t.length,e.length);return o!==Dt&&(o=bu(t[0],t[h-1])),s=h>2?Mu:ku,u=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(u||(u=s(t.map(r),e,n)))(r(o(h)))}return f.invert=function(h){return o(i((l||(l=s(e,t.map(r),ut)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,xu),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=No,c()},f.clamp=function(h){return arguments.length?(o=h?!0:Dt,c()):o!==Dt},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return r=h,i=d,c()}}function Nu(){return $u()(Dt,Dt)}function Eu(t,e,n,r){var i=hi(t,e,n),a;switch(r=_e(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=yu(i,o))&&(r.precision=a),Rr(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=_u(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=mu(i))&&(r.precision=a-(r.type==="%")*2);break}}return Dr(r)}function Su(t){var e=t.domain;return t.ticks=function(n){var r=e();return fi(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Eu(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],u,l,c=10;for(s<o&&(l=o,o=s,s=l,l=i,i=a,a=l);c-- >0;){if(l=Le(o,s,n),l===u)return r[i]=o,r[a]=s,e(r);if(l>0)o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l;else if(l<0)o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l;else break;u=l}return t},t}function Bt(){var t=Nu();return t.copy=function(){return Au(t,Bt())},vu.apply(t,arguments),Su(t)}function Ft(t){return function(){return t}}function Cu(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new eu(e)}function Tu(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function zr(t){this._context=t}zr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Fu(t){return new zr(t)}function Du(t){return t[0]}function Ru(t){return t[1]}function Zn(t,e){var n=Ft(!0),r=null,i=Fu,a=null,o=Cu(s);t=typeof t=="function"?t:t===void 0?Du:Ft(t),e=typeof e=="function"?e:e===void 0?Ru:Ft(e);function s(u){var l,c=(u=Tu(u)).length,f,h=!1,d;for(r==null&&(a=i(d=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(f,l,u),+e(f,l,u));if(d)return a=null,d+""||null}return s.x=function(u){return arguments.length?(t=typeof u=="function"?u:Ft(+u),s):t},s.y=function(u){return arguments.length?(e=typeof u=="function"?u:Ft(+u),s):e},s.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Ft(!!u),s):n},s.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),s):i},s.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),s):r},s}function Qn(t){return t<0?-1:1}function Jn(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Qn(a)+Qn(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function jn(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Oe(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function ve(t){this._context=t}ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Oe(this,this._t0,jn(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Oe(this,jn(this,n=Jn(this,t,e)),n);break;default:Oe(this,this._t0,n=Jn(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(ve.prototype).point=function(t,e){ve.prototype.point.call(this,e,t)};function tr(t){return new ve(t)}function Yt(t,e,n){this.k=t,this.x=e,this.y=n}Yt.prototype={constructor:Yt,scale:function(t){return t===1?this:new Yt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Yt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Yt.prototype;var zu=nn('<div class="legend-item svelte-ac2dep"><div class="legend-color estrus-color svelte-ac2dep" style="background-color: #FCCFCE; opacity: 1;"></div> <span class="svelte-ac2dep">Estrus</span></div>'),Pu=nn('<div class="graph-container svelte-ac2dep"><div class="main-content svelte-ac2dep"><svg class="svelte-ac2dep"></svg> <svg class="brush-svg svelte-ac2dep"></svg></div> <div class="legend svelte-ac2dep"><h3 class="svelte-ac2dep">Legend</h3> <div class="legend-items svelte-ac2dep"><div class="legend-item svelte-ac2dep"><div class="legend-color svelte-ac2dep" style="background-color: #1f77b4;"></div> <span class="svelte-ac2dep">Avg Core Body Temp</span></div> <div class="legend-item svelte-ac2dep"><div class="legend-color svelte-ac2dep" style="background-color: #F2F2F2; opacity: 1;"></div> <span class="svelte-ac2dep">Lights Off</span></div> <div class="legend-item svelte-ac2dep"><div class="legend-color svelte-ac2dep" style="background-color: #FFFFEC; opacity: 1;"></div> <span class="svelte-ac2dep">Lights On</span></div> <!></div> <div class="controls svelte-ac2dep"><button class="temp-toggle svelte-ac2dep"> </button> <select class="data-type-select svelte-ac2dep"><option>Female Mice</option><option>Male Mice</option><option>All Mice</option></select> <button> </button> <button class="reset-zoom svelte-ac2dep">Reset View</button></div></div></div>');function Iu(t,e){Vr(e,!1);let n=jt(e,"width",8,800),r=jt(e,"height",8,400),i=jt(e,"margin",24,()=>({top:40,right:60,bottom:50,left:60})),a=jt(e,"brushHeight",8,60),o=Ot(),s=Ot(),u=[],l=Ot(!1),c=Ot("female"),f=Ot(!0),h,d=null,w;function M(S){return S*9/5+32}function p(S){return I(l)?M(S):S}function m(){return I(l)?"F":"C"}function y(){return I(l)?[M(35.25),M(39)]:[35.25,39]}function g(){Mt(l,!I(l)),E(),A()}function b(S){const q=S.domain();return q[1]-q[0]<=1?Ne(S).ticks(6).tickFormat(N=>{const U=Number(N),V=Math.floor(U),tt=(U-V)*24,Z=Math.floor(tt),_=Math.round((tt-Z)*60);return`Day ${V+1}, ${Z}:${_.toString().padStart(2,"0")}`}):Ne(S).ticks(6).tickFormat(N=>`Day ${Math.floor(Number(N)+1)}`)}async function v(){const q=await(await fetch("/project-3-dsc106")).text(),z=su(q),N=tt=>{switch(tt){case"female":return Array.from({length:13},(Z,_)=>`fem_temp_${_+1}`);case"male":return Array.from({length:13},(Z,_)=>`male_temp_${_+1}`);case"both":return[...Array.from({length:13},(Z,_)=>`fem_temp_${_+1}`),...Array.from({length:13},(Z,_)=>`male_temp_${_+1}`)]}},U=2.5,V=new Map;z.forEach((tt,Z)=>{var yt;const _=Math.floor(Z/U),et=N(I(c)).map(Me=>+tt[Me]),G=_n(et)||0;V.has(_)||V.set(_,[]),(yt=V.get(_))==null||yt.push(G)}),u=Array.from(V.entries()).map(([tt,Z])=>{const _=tt*U,k=Math.floor(_/1440),G=_%1440<720?1:0,yt=k%4===2?1:0;return{minute:_,day:_/1440,avgTemp:_n(Z)||0,light:G,estrus:yt}}),d=null,E(),A()}function F(S){Mt(c,S),S!=="female"&&Mt(f,!1),v()}function E(){if(!u.length)return;it(I(o)).selectAll("*").remove();const S=n()-i().left-i().right,q=r()-i().top-i().bottom,z=d||[0,14],N=Bt().domain(z).range([0,S]),U=Bt().domain(y()).range([q,0]),V=y(),tt=6,Z=(V[1]-V[0])/(tt-1),_=Array.from({length:tt},(P,nt)=>+(V[0]+Z*nt).toFixed(1)),k=it(I(o)).attr("width",n()).attr("height",r()).append("g").attr("transform",`translate(${i().left},${i().top})`),et=k.append("g").attr("class","visualization"),G=et.append("g").attr("class","background");for(let P=0;P<14;P++)G.append("rect").attr("x",N(Math.max(P,z[0]))).attr("y",0).attr("width",N(Math.min(P+.5,z[1]))-N(Math.max(P,z[0]))).attr("height",q).attr("fill","#F2F2F2").attr("opacity",1),G.append("rect").attr("x",N(Math.max(P+.5,z[0]))).attr("y",0).attr("width",N(Math.min(P+1,z[1]))-N(Math.max(P+.5,z[0]))).attr("height",q).attr("fill","#FFFFEC").attr("opacity",1);if(I(f)&&I(c)==="female"){const P=et.append("g").attr("class","estrus");[2,6,10].forEach(nt=>{nt+1>=z[0]&&nt<=z[1]&&P.append("rect").attr("x",N(Math.max(nt,z[0]))).attr("y",0).attr("width",N(Math.min(nt+1,z[1]))-N(Math.max(nt,z[0]))).attr("height",q).attr("fill","#FCCFCE").attr("opacity",1).style("mix-blend-mode","multiply")})}const yt=u.filter(P=>P.day>=z[0]&&P.day<=z[1]),Me=Zn().x(P=>N(P.day)).y(P=>U(p(P.avgTemp))).curve(tr);et.append("path").datum(yt).attr("fill","none").attr("stroke","#1f77b4").attr("stroke-width",1.5).attr("d",Me);const Pr=I(c)==="female"?"Average Core Body Temperature (Female Mice)":I(c)==="male"?"Average Core Body Temperature (Male Mice)":"Average Core Body Temperature (All Mice)";k.append("text").attr("class","title").attr("x",S/2).attr("y",-15).attr("text-anchor","middle").style("font-size","16px").style("font-weight","bold").text(Pr),et.selectAll(".dot").data(yt).enter().append("circle").attr("class","dot").attr("cx",P=>N(P.day)).attr("cy",P=>U(p(P.avgTemp))).attr("r",2).style("fill","#1f77b4").style("opacity",0).on("mouseover",function(P,nt){it(this).style("opacity",1).attr("r",4),w.transition().duration(200).style("opacity",.9);const Hr=Math.floor(nt.day)+1,dn=(nt.day-Math.floor(nt.day))*24,pn=Math.floor(dn),Lr=Math.round((dn-pn)*60);w.html(`Day ${Hr}, ${pn}:${Lr.toString().padStart(2,"0")}<br/>
           Temperature: ${p(nt.avgTemp).toFixed(2)}${m()}<br/>
           Period: ${nt.light?"Lights Off":"Lights On"}`+(I(c)==="female"?`<br/>Estrus: ${nt.estrus?"Yes":"No"}`:"")).style("left",P.pageX+10+"px").style("top",P.pageY-28+"px")}).on("mouseout",function(){it(this).style("opacity",0).attr("r",2),w.transition().duration(500).style("opacity",0)});const Ir=k.append("g").attr("class","x-axis").attr("transform",`translate(0,${q})`),Or=k.append("g").attr("class","y-axis");Ir.call(b(N)).append("text").attr("x",S/2).attr("y",35).attr("fill","black").attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","bold").text("Day"),Or.call(vi(U).tickValues(_).tickFormat(P=>P.toString())).append("text").attr("transform","rotate(-90)").attr("x",-q/2).attr("y",-45).attr("fill","black").attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","bold").text(`Temperature (${m()})`)}function A(){if(!u.length)return;it(I(s)).selectAll("*").remove();const S=n()-i().left-i().right,q={top:5,right:i().right,bottom:20,left:i().left},z=a()-q.top-q.bottom,N=Bt().domain([0,14]).range([0,S]),U=Bt().domain(y()).range([z,0]),V=it(I(s)).attr("width",n()).attr("height",a()).append("g").attr("transform",`translate(${q.left},${q.top})`);for(let k=0;k<14;k++)V.append("rect").attr("x",N(k)).attr("y",0).attr("width",N(k+.5)-N(k)).attr("height",z).attr("fill","#F2F2F2").attr("opacity",1),V.append("rect").attr("x",N(k+.5)).attr("y",0).attr("width",N(k+1)-N(k+.5)).attr("height",z).attr("fill","#FFFFEC").attr("opacity",1);I(f)&&I(c)==="female"&&[2,6,10].forEach(k=>{V.append("rect").attr("x",N(k)).attr("y",0).attr("width",N(k+1)-N(k)).attr("height",z).attr("fill","#FCCFCE").attr("opacity",1).style("mix-blend-mode","multiply")});const tt=Zn().x(k=>N(k.day)).y(k=>U(p(k.avgTemp))).curve(tr);V.append("path").datum(u).attr("fill","none").attr("stroke","#1f77b4").attr("stroke-width",1).attr("d",tt),h=Qs().extent([[0,0],[S,z]]).on("end",_);const Z=V.append("g").attr("class","brush").call(h);d&&Z.call(h.move,[N(d[0]),N(d[1])]),V.append("g").attr("class","x-axis-brush").attr("transform",`translate(0,${z})`).call(Ne(N).ticks(7).tickFormat(k=>`${Math.floor(Number(k))}`));function _(k){if(!k.selection){d=null,E();return}const[et,G]=k.selection;d=[N.invert(et),N.invert(G)],E()}}function B(){d=null,A(),E()}Jr(async()=>{w=it("body").append("div").attr("class","mouse-tooltip").style("position","absolute").style("background-color","white").style("padding","8px").style("border","1px solid #ddd").style("border-radius","4px").style("pointer-events","none").style("opacity",0).style("z-index",10),await v()}),jr(()=>{w&&w.remove()}),qr();var C=Pu(),x=_t(C),D=_t(x);yn(D,S=>Mt(o,S),()=>I(o));var $=st(D,2);yn($,S=>Mt(s,S),()=>I(s)),vt(x);var R=st(x,2),j=st(_t(R),2),H=st(_t(j),6);{var L=S=>{var q=zu();He(S,q)};Zr(H,S=>{I(c)==="female"&&S(L)})}vt(j);var K=st(j,2),T=_t(K),Y=_t(T);vt(T);var O=st(T,2);gn(()=>{I(c),Ur(()=>{})});var X=_t(O);X.value=X.__value="female";var wt=st(X);wt.value=wt.__value="male";var xt=st(wt);xt.value=xt.__value="both",vt(O);var ft=st(O,2);let bt;var W=_t(ft);vt(ft);var kt=st(ft,2);vt(K),vt(R),vt(C),gn(S=>{mn(Y,`Switch to ${I(l)?"Celsius":"Fahrenheit"}`),bt=Qr(ft,1,"estrus-toggle svelte-ac2dep",null,bt,S),mn(W,`${I(f)?"Hide":"Show"} Estrus Period`)},[()=>({disabled:I(c)!=="female"})],Yr),Jt("click",T,g),ei(O,()=>I(c),S=>Mt(c,S)),Jt("change",O,()=>F(I(c))),Jt("click",ft,()=>{I(c)==="female"&&(Mt(f,!I(f)),E(),A())}),Jt("click",kt,B),He(t,C),Br()}var Ou=nn(`<div class="flex flex-col gap-x-2.5 mt-20"><h1 class="svelte-421x7c">Mouse Data - Pulse of the Night</h1> <h2 class="svelte-421x7c">Dynamic visualization of mouse behavior, thermoregulation, and red-band estrus under 12h light/dark.</h2> <h3 class="svelte-421x7c">Brian Can, David Chew, Derek Kuang, Aathi Muthu</h3></div> <p class="text-justify my-6 leading-relaxed svelte-421x7c">Our visualization centers on three coordinated components that let users explore mouse activity, 
temperature, and estrus cycles with minimal friction. A light/dark color scheme immediately communicates 
the 12-hour on/off rhythm: light hues for "lights on" and dark shades for "lights off." Estrus days 
are highlighted in red only when viewing female subjects (the estrus toggle is hidden for males and 
disabled when "Both" sexes are selected). Users can switch body-temperature units between Fahrenheit 
and Celsius. Users can also use the time slider at the bottom to zoom in on a specific time period of their interest to better examine detailed fluctuations in mouse activity, temperature variations, and estrus timing within the broader circadian cycle.</p> <!> <p class="text-justify my-6 leading-relaxed svelte-421x7c">We chose solid light/dark bands to make the 12-hour on/off cycle immediately legible (a blue-black gradient proved too subtle), overlaid semi-opaque red rectangles for estrus so users can instantly see how activity and temperature shift during those periods (and hide that control for males or Both to avoid dead-end toggles), and an explicit F/C switch that not only relabels the axis but dynamically rescales tick intervals. Free-form pan/zoom lets users dive into any anomaly, while the draggable range selector provides quick overview+detail highlighting of min/max values. An alternative to this approach was to directly pan and zoom on the graph. However this caused issues of zooming into the wrong spot since we would manually be zooming with our mouse. Together, these encodings and interactions balance clarity and flexibility, letting users fluidly explore circadian rhythms without visual overload.</p> <p class="text-justify my-6 leading-relaxed svelte-421x7c">Our two-week development is included in a single GitHub repository. We started off with a group brainstorming session, then distributed tasks among the four of us: Brian implemented the D3 map of light/dark intervals, created the temperature-unit toggle and axis rescaling, Aathi built the gender and estrus filters, created the time-range selector and pan/zoom behavior. David and Derek fixed the styling and added the write up for the whole project. In total, we logged roughly 16 person-hours (about four each). Integrating the zoom and drag behaviors in D3 proved the biggest time sinkit took nearly two hours to nail smooth interactions without layout jank. Once those were stable, integrating the remaining controls and polishing the color scheme fell into place quickly.</p>`,1);function Uu(t){var e=Ou(),n=st(Gr(e),4);Iu(n,{}),Kr(4),He(t,e)}export{Uu as component};
